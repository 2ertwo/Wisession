{% extends 'company_layout.html' %}

{% load static %}

{% block css %}
    <link href="{% static 'css/dropzone.css' %}" rel="stylesheet">
{% endblock %}

{% block title %}修改服务头像{% endblock %}

{% block header %}
    <h2 class="page-title">修改服务头像</h2>
{% endblock %}
{% block content %}
    <div class="col-md-3 col-lg-4">
        <div class="card">
            <div class="card-body p-4 text-center">
                                <span class="avatar avatar-xl mb-3 avatar-rounded"
                                      style="background-image: url({{ MEDIA_URL }}logo/{{ service_obj.icon }}/)"></span>
                <h3 class="m-0 mb-1">当前头像</h3>
            </div>
            <div class="d-flex">
                <div class="container-xl">
                    <div class="card-body">
                        <h3 class="card-title">上传图标</h3>
                        <form class="dropzone" id="dropzone-custom"
                              action="/company/service/icon/edit/{{ service_obj.id }}/" autocomplete="off"
                              novalidate>
                            {% csrf_token %}
                            <div class="fallback">
                                <input name="file" type="file"/>
                            </div>
                            <div class="dz-message">
                                <h3 class="dropzone-msg-title">将图片拖拽至此上传头像</h3>
                                <span class="dropzone-msg-desc">只支持.jpg,.png,.jpeg</span>
                            </div>
                            <a href="/company/service/list/" class="btn btn-primary w-100">
                                确认
                            </a>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    <script src="{% static 'js/dropzone-min.js' %}" defer></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            new Dropzone("#dropzone-custom")
        })
    </script>
{% endblock %}